syntax = "proto3";

package messages;

// Message - Public Message (0002)
message PublicMessage {
    uint64 Timestamp                               = 1;   // Timestamp
    string Subject                                 = 2;   // varchar
    OutpointField Regarding                        = 3;   // Outpoint
    DocumentField PublicMessage                    = 4;   // Document
    repeated DocumentField Attachments             = 5;   // Document[]
}

// Message - Private Message (0003)
message PrivateMessage {
    uint64 Timestamp                               = 1;   // Timestamp
    string Subject                                 = 2;   // varchar
    OutpointField Regarding                        = 3;   // Outpoint
    DocumentField PrivateMessage                   = 4;   // Document
    repeated DocumentField Attachments             = 5;   // Document[]
}

// Message - Reverted Tx (0004)
message RevertedTx {
    uint64 Timestamp                               = 1;   // Timestamp
    bytes Transaction                              = 2;   // varbin
}

// Message - Offer (1001)
message Offer {
    uint64 Timestamp                               = 1;   // Timestamp
    bytes Payload                                  = 2;   // varbin
}

// Message - Signature Request (1002)
message SignatureRequest {
    uint64 Timestamp                               = 1;   // Timestamp
    bytes Payload                                  = 2;   // varbin
}

// Message - Settlement Request (1003)
message SettlementRequest {
    uint64 Timestamp                               = 1;   // Timestamp
    bytes TransferTxId                             = 2;   // TxId
    repeated TargetAddressField ContractFees       = 3;   // TargetAddress[]
    bytes Settlement                               = 4;   // varbin
}

// Message - Output Metadata (1004)
message OutputMetadata {
    string OutputDescription                       = 1;   // varchar
    repeated uint64 Tags                           = 2;   // Tag[]
    repeated OutputTagField CustomTags             = 3;   // OutputTag[]
}


// Field - Outpoint
message OutpointField {
    bytes TxId                                     = 1;   // TxId
    uint32 OutputIndex                             = 2;   // uint
}

// Field - Output Tag
message OutputTagField {
    string Tag                                     = 1;   // varchar
}

// Field - Document
message DocumentField {
    string Name                                    = 1;   // varchar
    string Type                                    = 2;   // varchar
    bytes Contents                                 = 3;   // varbin
}

// Field - Target Address
message TargetAddressField {
    bytes Address                                  = 1;   // PublicKeyHash
    uint64 Quantity                                = 2;   // uint
}

