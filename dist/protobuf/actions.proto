syntax = "proto3";

package actions;

// Action - Contract Offer (C1)
message ContractOfferAction {
    string ContractName                            = 1;   // varchar
    uint32 BodyOfAgreementType                     = 2;   // uint
    bytes BodyOfAgreement                          = 3;   // varbin
    string ContractType                            = 4;   // varchar
    repeated DocumentField SupportingDocs          = 5;   // Document[]
    string GoverningLaw                            = 6;   // fixedchar
    string Jurisdiction                            = 7;   // fixedchar
    uint64 ContractExpiration                      = 8;   // Timestamp
    string ContractURI                             = 9;   // varchar
    EntityField Issuer                             = 10;   // Entity
    string IssuerLogoURL                           = 11;  // varchar
    bool ContractOperatorIncluded                  = 12;  // bool
    EntityField ContractOperator                   = 13;  // Entity
    uint64 ContractFee                             = 14;  // uint
    repeated VotingSystemField VotingSystems       = 15;  // VotingSystem[]
    bytes ContractAuthFlags                        = 16;  // varbin
    uint64 RestrictedQtyAssets                     = 17;  // uint
    bool AdministrationProposal                    = 18;  // bool
    bool HolderProposal                            = 19;  // bool
    repeated OracleField Oracles                   = 20;  // Oracle[]
    bytes MasterPKH                                = 21;  // PublicKeyHash
}

// Action - Contract Formation (C2)
message ContractFormationAction {
    string ContractName                            = 1;   // varchar
    uint32 BodyOfAgreementType                     = 2;   // uint
    bytes BodyOfAgreement                          = 3;   // varbin
    string ContractType                            = 4;   // varchar
    repeated DocumentField SupportingDocs          = 5;   // Document[]
    string GoverningLaw                            = 6;   // fixedchar
    string Jurisdiction                            = 7;   // fixedchar
    uint64 ContractExpiration                      = 8;   // Timestamp
    string ContractURI                             = 9;   // varchar
    EntityField Issuer                             = 10;   // Entity
    string IssuerLogoURL                           = 11;  // varchar
    bool ContractOperatorIncluded                  = 12;  // bool
    EntityField ContractOperator                   = 13;  // Entity
    uint64 ContractFee                             = 14;  // uint
    repeated VotingSystemField VotingSystems       = 15;  // VotingSystem[]
    bytes ContractAuthFlags                        = 16;  // varbin
    uint64 RestrictedQtyAssets                     = 17;  // uint
    bool AdministrationProposal                    = 18;  // bool
    bool HolderProposal                            = 19;  // bool
    repeated OracleField Oracles                   = 20;  // Oracle[]
    bytes MasterPKH                                = 21;  // PublicKeyHash
    uint32 ContractRevision                        = 22;  // uint
    uint64 Timestamp                               = 23;  // Timestamp
}

// Action - Contract Amendment (C3)
message ContractAmendmentAction {
    bool ChangeAdministrationAddress               = 1;   // bool
    bool ChangeOperatorAddress                     = 2;   // bool
    uint32 ContractRevision                        = 3;   // uint
    repeated AmendmentField Amendments             = 4;   // Amendment[]
    bytes RefTxID                                  = 5;   // TxId
}

// Action - Static Contract Formation (C4)
message StaticContractFormationAction {
    string ContractName                            = 1;   // varchar
    bytes ContractCode                             = 2;   // ContractCode
    uint32 BodyOfAgreementType                     = 3;   // uint
    bytes BodyOfAgreement                          = 4;   // varbin
    string ContractType                            = 5;   // varchar
    repeated DocumentField SupportingDocs          = 6;   // Document[]
    uint32 ContractRevision                        = 7;   // uint
    string GoverningLaw                            = 8;   // fixedchar
    string Jurisdiction                            = 9;   // fixedchar
    uint64 EffectiveDate                           = 10;   // Timestamp
    uint64 ContractExpiration                      = 11;  // Timestamp
    string ContractURI                             = 12;  // varchar
    bytes PrevRevTxID                              = 13;  // TxId
    repeated EntityField Entities                  = 14;  // Entity[]
}

// Action - Contract Address Change (C5)
message ContractAddressChangeAction {
    bytes NewContractPKH                           = 1;   // PublicKeyHash
    uint64 Timestamp                               = 2;   // Timestamp
}

// Action - Asset Definition (A1)
message AssetDefinitionAction {
    bytes AssetAuthFlags                           = 1;   // varbin
    bool TransfersPermitted                        = 2;   // bool
    repeated string TradeRestrictions              = 3;   // Polity[]
    bool EnforcementOrdersPermitted                = 4;   // bool
    bool VotingRights                              = 5;   // bool
    uint32 VoteMultiplier                          = 6;   // uint
    bool AdministrationProposal                    = 7;   // bool
    bool HolderProposal                            = 8;   // bool
    uint32 AssetModificationGovernance             = 9;   // uint
    uint64 TokenQty                                = 10;   // uint
    bytes AssetPayload                             = 11;  // varbin
}

// Action - Asset Creation (A2)
message AssetCreationAction {
    bytes AssetCode                                = 1;   // AssetCode
    uint64 AssetIndex                              = 2;   // uint
    bytes AssetAuthFlags                           = 3;   // varbin
    bool TransfersPermitted                        = 4;   // bool
    repeated string TradeRestrictions              = 5;   // Polity[]
    bool EnforcementOrdersPermitted                = 6;   // bool
    bool VotingRights                              = 7;   // bool
    uint32 VoteMultiplier                          = 8;   // uint
    bool AdministrationProposal                    = 9;   // bool
    bool HolderProposal                            = 10;   // bool
    uint32 AssetModificationGovernance             = 11;  // uint
    uint64 TokenQty                                = 12;  // uint
    bytes AssetPayload                             = 13;  // varbin
    uint32 AssetRevision                           = 14;  // uint
    uint64 Timestamp                               = 15;  // Timestamp
}

// Action - Asset Modification (A3)
message AssetModificationAction {
    string AssetType                               = 1;   // fixedchar
    bytes AssetCode                                = 2;   // AssetCode
    uint32 AssetRevision                           = 3;   // uint
    repeated AmendmentField Amendments             = 4;   // Amendment[]
    bytes RefTxID                                  = 5;   // TxId
}

// Action - Transfer (T1)
message TransferAction {
    repeated AssetTransferField Assets             = 1;   // AssetTransfer[]
    uint64 OfferExpiry                             = 2;   // Timestamp
    uint64 ExchangeFee                             = 3;   // uint
    bytes ExchangeFeeAddress                       = 4;   // PublicKeyHash
}

// Action - Settlement (T2)
message SettlementAction {
    repeated AssetSettlementField Assets           = 1;   // AssetSettlement[]
    uint64 Timestamp                               = 2;   // Timestamp
}

// Action - Proposal (G1)
message ProposalAction {
    uint32 Initiator                               = 1;   // uint
    bool AssetSpecificVote                         = 2;   // bool
    string AssetType                               = 3;   // fixedchar
    bytes AssetCode                                = 4;   // AssetCode
    uint32 VoteSystem                              = 5;   // uint
    bool Specific                                  = 6;   // bool
    repeated AmendmentField ProposedAmendments     = 7;   // Amendment[]
    string VoteOptions                             = 8;   // varchar
    uint32 VoteMax                                 = 9;   // uint
    string ProposalDescription                     = 10;   // varchar
    bytes ProposalDocumentHash                     = 11;  // bin
    uint64 VoteCutOffTimestamp                     = 12;  // Timestamp
}

// Action - Vote (G2)
message VoteAction {
    uint64 Timestamp                               = 1;   // Timestamp
}

// Action - Ballot Cast (G3)
message BallotCastAction {
    bytes VoteTxId                                 = 1;   // TxId
    string Vote                                    = 2;   // varchar
}

// Action - Ballot Counted (G4)
message BallotCountedAction {
    bytes VoteTxId                                 = 1;   // TxId
    string Vote                                    = 2;   // varchar
    uint64 Quantity                                = 3;   // uint
    uint64 Timestamp                               = 4;   // Timestamp
}

// Action - Result (G5)
message ResultAction {
    bool AssetSpecificVote                         = 1;   // bool
    string AssetType                               = 2;   // fixedchar
    bytes AssetCode                                = 3;   // AssetCode
    bool Specific                                  = 4;   // bool
    repeated AmendmentField ProposedAmendments     = 5;   // Amendment[]
    bytes VoteTxId                                 = 6;   // TxId
    repeated uint64 OptionTally                    = 7;   // uint[]
    string Result                                  = 8;   // varchar
    uint64 Timestamp                               = 9;   // Timestamp
}

// Action - Order (E1)
message OrderAction {
    string ComplianceAction                        = 1;   // fixedchar
    string AssetType                               = 2;   // fixedchar
    bytes AssetCode                                = 3;   // AssetCode
    repeated TargetAddressField TargetAddresses    = 4;   // TargetAddress[]
    bytes FreezeTxId                               = 5;   // TxId
    uint64 FreezePeriod                            = 6;   // Timestamp
    bytes DepositAddress                           = 7;   // PublicKeyHash
    bool AuthorityIncluded                         = 8;   // bool
    string AuthorityName                           = 9;   // varchar
    bytes AuthorityPublicKey                       = 10;   // varbin
    uint32 SignatureAlgorithm                      = 11;  // uint
    bytes OrderSignature                           = 12;  // varbin
    bytes SupportingEvidenceHash                   = 13;  // bin
    bytes RefTxs                                   = 14;  // varbin
    repeated QuantityIndexField BitcoinDispersions = 15;  // QuantityIndex[]
    string Message                                 = 16;  // varchar
}

// Action - Freeze (E2)
message FreezeAction {
    string AssetType                               = 1;   // fixedchar
    bytes AssetCode                                = 2;   // AssetCode
    repeated QuantityIndexField Quantities         = 3;   // QuantityIndex[]
    uint64 FreezePeriod                            = 4;   // Timestamp
    uint64 Timestamp                               = 5;   // Timestamp
}

// Action - Thaw (E3)
message ThawAction {
    bytes FreezeTxId                               = 1;   // TxId
    uint64 Timestamp                               = 2;   // Timestamp
}

// Action - Confiscation (E4)
message ConfiscationAction {
    string AssetType                               = 1;   // fixedchar
    bytes AssetCode                                = 2;   // AssetCode
    repeated QuantityIndexField Quantities         = 3;   // QuantityIndex[]
    uint64 DepositQty                              = 4;   // uint
    uint64 Timestamp                               = 5;   // Timestamp
}

// Action - Reconciliation (E5)
message ReconciliationAction {
    string AssetType                               = 1;   // fixedchar
    bytes AssetCode                                = 2;   // AssetCode
    repeated QuantityIndexField Quantities         = 3;   // QuantityIndex[]
    uint64 Timestamp                               = 4;   // Timestamp
}

// Action - Establishment (R1)
message EstablishmentAction {
    string Message                                 = 1;   // varchar
}

// Action - Addition (R2)
message AdditionAction {
    string Message                                 = 1;   // varchar
}

// Action - Alteration (R3)
message AlterationAction {
    bytes EntryTxID                                = 1;   // TxId
    string Message                                 = 2;   // varchar
}

// Action - Removal (R4)
message RemovalAction {
    bytes EntryTxID                                = 1;   // TxId
    string Message                                 = 2;   // varchar
}

// Action - Message (M1)
message MessageAction {
    repeated uint32 AddressIndexes                 = 1;   // uint[]
    bytes MessagePayload                           = 2;   // varbin
}

// Action - Rejection (M2)
message RejectionAction {
    repeated uint32 AddressIndexes                 = 1;   // uint[]
    uint32 RejectAddressIndex                      = 2;   // uint
    uint64 RejectionCode                           = 3;   // RejectionCode
    string Message                                 = 4;   // varchar
    uint64 Timestamp                               = 5;   // Timestamp
}


// Field - Administrator
message AdministratorField {
    uint64 Type                                    = 1;   // Role
    string Name                                    = 2;   // varchar
}

// Field - Amendment
message AmendmentField {
    uint32 FieldIndex                              = 1;   // uint
    uint32 Element                                 = 2;   // uint
    uint32 SubfieldIndex                           = 3;   // uint
    uint32 SubfieldElement                         = 4;   // uint
    uint32 Operation                               = 5;   // uint
    bytes Data                                     = 6;   // varbin
}

// Field - AssetReceiver
message AssetReceiverField {
    bytes Address                                  = 1;   // PublicKeyHash
    uint64 Quantity                                = 2;   // uint
    uint32 OracleSigAlgorithm                      = 3;   // uint
    uint32 OracleIndex                             = 4;   // uint
    bytes OracleConfirmationSig                    = 5;   // varbin
    uint32 OracleSigBlockHeight                    = 6;   // uint
}

// Field - Asset Settlement
message AssetSettlementField {
    uint32 ContractIndex                           = 1;   // uint
    string AssetType                               = 2;   // fixedchar
    bytes AssetCode                                = 3;   // AssetCode
    repeated QuantityIndexField Settlements        = 4;   // QuantityIndex[]
}

// Field - Asset Transfer
message AssetTransferField {
    uint32 ContractIndex                           = 1;   // uint
    string AssetType                               = 2;   // fixedchar
    bytes AssetCode                                = 3;   // AssetCode
    repeated QuantityIndexField AssetSenders       = 4;   // QuantityIndex[]
    repeated AssetReceiverField AssetReceivers     = 5;   // AssetReceiver[]
}

// Field - Document
message DocumentField {
    string Name                                    = 1;   // varchar
    string Type                                    = 2;   // varchar
    bytes Contents                                 = 3;   // varbin
}

// Field - Entity
message EntityField {
    string Name                                    = 1;   // varchar
    string Type                                    = 2;   // EntityType
    string LEI                                     = 3;   // fixedchar
    bool AddressIncluded                           = 4;   // bool
    string UnitNumber                              = 5;   // varchar
    string BuildingNumber                          = 6;   // varchar
    string Street                                  = 7;   // varchar
    string SuburbCity                              = 8;   // varchar
    string TerritoryStateProvinceCode              = 9;   // fixedchar
    string CountryCode                             = 10;   // fixedchar
    string PostalZIPCode                           = 11;  // fixedchar
    string EmailAddress                            = 12;  // varchar
    string PhoneNumber                             = 13;  // varchar
    repeated AdministratorField Administration     = 14;  // Administrator[]
    repeated ManagerField Management               = 15;  // Manager[]
}

// Field - Manager
message ManagerField {
    uint64 Type                                    = 1;   // Role
    string Name                                    = 2;   // varchar
}

// Field - Oracle
message OracleField {
    string Name                                    = 1;   // varchar
    string URL                                     = 2;   // varchar
    bytes PublicKey                                = 3;   // varbin
}

// Field - Quantity Index
message QuantityIndexField {
    uint32 Index                                   = 1;   // uint
    uint64 Quantity                                = 2;   // uint
}

// Field - Target Address
message TargetAddressField {
    bytes Address                                  = 1;   // PublicKeyHash
    uint64 Quantity                                = 2;   // uint
}

// Field - Voting System
message VotingSystemField {
    string Name                                    = 1;   // varchar
    string VoteType                                = 2;   // fixedchar
    string TallyLogic                              = 3;   // fixedchar
    uint32 ThresholdPercentage                     = 4;   // uint
    bool VoteMultiplierPermitted                   = 5;   // bool
    uint64 HolderProposalFee                       = 6;   // uint
}

