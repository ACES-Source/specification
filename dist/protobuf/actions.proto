syntax = "proto3";

package protoc;

// Action - Contract Offer (C1)
message ContractOfferAction {
    string ContractName                            = 0;   // varchar
    uint BodyOfAgreementType                       = 1;   // uint
    bytes BodyOfAgreement                          = 2;   // varbin
    string ContractType                            = 3;   // varchar
    repeated DocumentField SupportingDocs          = 4;   // Document[]
    string GoverningLaw                            = 5;   // fixedchar
    string Jurisdiction                            = 6;   // fixedchar
    TimestampField ContractExpiration              = 7;   // Timestamp
    string ContractURI                             = 8;   // varchar
    EntityField Issuer                             = 9;   // Entity
    string IssuerLogoURL                           = 10;  // varchar
    bool ContractOperatorIncluded                  = 11;  // bool
    EntityField ContractOperator                   = 12;  // Entity
    uint ContractFee                               = 13;  // uint
    repeated VotingSystemField VotingSystems       = 14;  // VotingSystem[]
    bytes ContractAuthFlags                        = 15;  // varbin
    uint RestrictedQtyAssets                       = 16;  // uint
    bool AdministrationProposal                    = 17;  // bool
    bool HolderProposal                            = 18;  // bool
    repeated OracleField Oracles                   = 19;  // Oracle[]
    PublicKeyHashField MasterPKH                   = 20;  // PublicKeyHash
}

// Action - Contract Formation (C2)
message ContractFormationAction {
    string ContractName                            = 0;   // varchar
    uint BodyOfAgreementType                       = 1;   // uint
    bytes BodyOfAgreement                          = 2;   // varbin
    string ContractType                            = 3;   // varchar
    repeated DocumentField SupportingDocs          = 4;   // Document[]
    string GoverningLaw                            = 5;   // fixedchar
    string Jurisdiction                            = 6;   // fixedchar
    TimestampField ContractExpiration              = 7;   // Timestamp
    string ContractURI                             = 8;   // varchar
    EntityField Issuer                             = 9;   // Entity
    string IssuerLogoURL                           = 10;  // varchar
    bool ContractOperatorIncluded                  = 11;  // bool
    EntityField ContractOperator                   = 12;  // Entity
    uint ContractFee                               = 13;  // uint
    repeated VotingSystemField VotingSystems       = 14;  // VotingSystem[]
    bytes ContractAuthFlags                        = 15;  // varbin
    uint RestrictedQtyAssets                       = 16;  // uint
    bool AdministrationProposal                    = 17;  // bool
    bool HolderProposal                            = 18;  // bool
    repeated OracleField Oracles                   = 19;  // Oracle[]
    PublicKeyHashField MasterPKH                   = 20;  // PublicKeyHash
    uint ContractRevision                          = 21;  // uint
    TimestampField Timestamp                       = 22;  // Timestamp
}

// Action - Contract Amendment (C3)
message ContractAmendmentAction {
    bool ChangeAdministrationAddress               = 0;   // bool
    bool ChangeOperatorAddress                     = 1;   // bool
    uint ContractRevision                          = 2;   // uint
    repeated AmendmentField Amendments             = 3;   // Amendment[]
    TxIdField RefTxID                              = 4;   // TxId
}

// Action - Static Contract Formation (C4)
message StaticContractFormationAction {
    string ContractName                            = 0;   // varchar
    ContractCodeField ContractCode                 = 1;   // ContractCode
    uint BodyOfAgreementType                       = 2;   // uint
    bytes BodyOfAgreement                          = 3;   // varbin
    string ContractType                            = 4;   // varchar
    repeated DocumentField SupportingDocs          = 5;   // Document[]
    uint ContractRevision                          = 6;   // uint
    string GoverningLaw                            = 7;   // fixedchar
    string Jurisdiction                            = 8;   // fixedchar
    TimestampField EffectiveDate                   = 9;   // Timestamp
    TimestampField ContractExpiration              = 10;  // Timestamp
    string ContractURI                             = 11;  // varchar
    TxIdField PrevRevTxID                          = 12;  // TxId
    repeated EntityField Entities                  = 13;  // Entity[]
}

// Action - Contract Address Change (C5)
message ContractAddressChangeAction {
    PublicKeyHashField NewContractPKH              = 0;   // PublicKeyHash
    TimestampField Timestamp                       = 1;   // Timestamp
}

// Action - Asset Definition (A1)
message AssetDefinitionAction {
    bytes AssetAuthFlags                           = 0;   // varbin
    bool TransfersPermitted                        = 1;   // bool
    repeated PolityField TradeRestrictions         = 2;   // Polity[]
    bool EnforcementOrdersPermitted                = 3;   // bool
    bool VotingRights                              = 4;   // bool
    uint VoteMultiplier                            = 5;   // uint
    bool AdministrationProposal                    = 6;   // bool
    bool HolderProposal                            = 7;   // bool
    uint AssetModificationGovernance               = 8;   // uint
    uint TokenQty                                  = 9;   // uint
    bytes AssetPayload                             = 10;  // varbin
}

// Action - Asset Creation (A2)
message AssetCreationAction {
    AssetCodeField AssetCode                       = 0;   // AssetCode
    uint AssetIndex                                = 1;   // uint
    bytes AssetAuthFlags                           = 2;   // varbin
    bool TransfersPermitted                        = 3;   // bool
    repeated PolityField TradeRestrictions         = 4;   // Polity[]
    bool EnforcementOrdersPermitted                = 5;   // bool
    bool VotingRights                              = 6;   // bool
    uint VoteMultiplier                            = 7;   // uint
    bool AdministrationProposal                    = 8;   // bool
    bool HolderProposal                            = 9;   // bool
    uint AssetModificationGovernance               = 10;  // uint
    uint TokenQty                                  = 11;  // uint
    bytes AssetPayload                             = 12;  // varbin
    uint AssetRevision                             = 13;  // uint
    TimestampField Timestamp                       = 14;  // Timestamp
}

// Action - Asset Modification (A3)
message AssetModificationAction {
    string AssetType                               = 0;   // fixedchar
    AssetCodeField AssetCode                       = 1;   // AssetCode
    uint AssetRevision                             = 2;   // uint
    repeated AmendmentField Amendments             = 3;   // Amendment[]
    TxIdField RefTxID                              = 4;   // TxId
}

// Action - Transfer (T1)
message TransferAction {
    repeated AssetTransferField Assets             = 0;   // AssetTransfer[]
    TimestampField OfferExpiry                     = 1;   // Timestamp
    uint ExchangeFee                               = 2;   // uint
    PublicKeyHashField ExchangeFeeAddress          = 3;   // PublicKeyHash
}

// Action - Settlement (T2)
message SettlementAction {
    repeated AssetSettlementField Assets           = 0;   // AssetSettlement[]
    TimestampField Timestamp                       = 1;   // Timestamp
}

// Action - Proposal (G1)
message ProposalAction {
    uint Initiator                                 = 0;   // uint
    bool AssetSpecificVote                         = 1;   // bool
    string AssetType                               = 2;   // fixedchar
    AssetCodeField AssetCode                       = 3;   // AssetCode
    uint VoteSystem                                = 4;   // uint
    bool Specific                                  = 5;   // bool
    repeated AmendmentField ProposedAmendments     = 6;   // Amendment[]
    string VoteOptions                             = 7;   // varchar
    uint VoteMax                                   = 8;   // uint
    string ProposalDescription                     = 9;   // varchar
    bytes ProposalDocumentHash                     = 10;  // bin
    TimestampField VoteCutOffTimestamp             = 11;  // Timestamp
}

// Action - Vote (G2)
message VoteAction {
    TimestampField Timestamp                       = 0;   // Timestamp
}

// Action - Ballot Cast (G3)
message BallotCastAction {
    TxIdField VoteTxId                             = 0;   // TxId
    string Vote                                    = 1;   // varchar
}

// Action - Ballot Counted (G4)
message BallotCountedAction {
    TxIdField VoteTxId                             = 0;   // TxId
    string Vote                                    = 1;   // varchar
    uint Quantity                                  = 2;   // uint
    TimestampField Timestamp                       = 3;   // Timestamp
}

// Action - Result (G5)
message ResultAction {
    bool AssetSpecificVote                         = 0;   // bool
    string AssetType                               = 1;   // fixedchar
    AssetCodeField AssetCode                       = 2;   // AssetCode
    bool Specific                                  = 3;   // bool
    repeated AmendmentField ProposedAmendments     = 4;   // Amendment[]
    TxIdField VoteTxId                             = 5;   // TxId
    repeated uint64Field OptionTally               = 6;   // uint64[]
    string Result                                  = 7;   // varchar
    TimestampField Timestamp                       = 8;   // Timestamp
}

// Action - Order (E1)
message OrderAction {
    string ComplianceAction                        = 0;   // fixedchar
    string AssetType                               = 1;   // fixedchar
    AssetCodeField AssetCode                       = 2;   // AssetCode
    repeated TargetAddressField TargetAddresses    = 3;   // TargetAddress[]
    TxIdField FreezeTxId                           = 4;   // TxId
    TimestampField FreezePeriod                    = 5;   // Timestamp
    PublicKeyHashField DepositAddress              = 6;   // PublicKeyHash
    bool AuthorityIncluded                         = 7;   // bool
    string AuthorityName                           = 8;   // varchar
    bytes AuthorityPublicKey                       = 9;   // varbin
    uint SignatureAlgorithm                        = 10;  // uint
    bytes OrderSignature                           = 11;  // varbin
    bytes SupportingEvidenceHash                   = 12;  // bin
    bytes RefTxs                                   = 13;  // varbin
    repeated QuantityIndexField BitcoinDispersions = 14;  // QuantityIndex[]
    string Message                                 = 15;  // varchar
}

// Action - Freeze (E2)
message FreezeAction {
    string AssetType                               = 0;   // fixedchar
    AssetCodeField AssetCode                       = 1;   // AssetCode
    repeated QuantityIndexField Quantities         = 2;   // QuantityIndex[]
    TimestampField FreezePeriod                    = 3;   // Timestamp
    TimestampField Timestamp                       = 4;   // Timestamp
}

// Action - Thaw (E3)
message ThawAction {
    TxIdField FreezeTxId                           = 0;   // TxId
    TimestampField Timestamp                       = 1;   // Timestamp
}

// Action - Confiscation (E4)
message ConfiscationAction {
    string AssetType                               = 0;   // fixedchar
    AssetCodeField AssetCode                       = 1;   // AssetCode
    repeated QuantityIndexField Quantities         = 2;   // QuantityIndex[]
    uint DepositQty                                = 3;   // uint
    TimestampField Timestamp                       = 4;   // Timestamp
}

// Action - Reconciliation (E5)
message ReconciliationAction {
    string AssetType                               = 0;   // fixedchar
    AssetCodeField AssetCode                       = 1;   // AssetCode
    repeated QuantityIndexField Quantities         = 2;   // QuantityIndex[]
    TimestampField Timestamp                       = 3;   // Timestamp
}

// Action - Establishment (R1)
message EstablishmentAction {
    string Message                                 = 0;   // varchar
}

// Action - Addition (R2)
message AdditionAction {
    string Message                                 = 0;   // varchar
}

// Action - Alteration (R3)
message AlterationAction {
    TxIdField EntryTxID                            = 0;   // TxId
    string Message                                 = 1;   // varchar
}

// Action - Removal (R4)
message RemovalAction {
    TxIdField EntryTxID                            = 0;   // TxId
    string Message                                 = 1;   // varchar
}

// Action - Message (M1)
message MessageAction {
    repeated uint16Field AddressIndexes            = 0;   // uint16[]
    bytes MessagePayload                           = 1;   // varbin
}

// Action - Rejection (M2)
message RejectionAction {
    repeated uint16Field AddressIndexes            = 0;   // uint16[]
    uint RejectAddressIndex                        = 1;   // uint
    RejectionCodeField RejectionCode               = 2;   // RejectionCode
    string Message                                 = 3;   // varchar
    TimestampField Timestamp                       = 4;   // Timestamp
}


// Field - Administrator
message AdministratorField {
    RoleField Type                                 = 0;   // Role
    string Name                                    = 1;   // varchar
}

// Field - Amendment
message AmendmentField {
    uint FieldIndex                                = 0;   // uint
    uint Element                                   = 1;   // uint
    uint SubfieldIndex                             = 2;   // uint
    uint SubfieldElement                           = 3;   // uint
    uint Operation                                 = 4;   // uint
    bytes Data                                     = 5;   // varbin
}

// Field - AssetReceiver
message AssetReceiverField {
    PublicKeyHashField Address                     = 0;   // PublicKeyHash
    uint Quantity                                  = 1;   // uint
    uint OracleSigAlgorithm                        = 2;   // uint
    uint OracleIndex                               = 3;   // uint
    bytes OracleConfirmationSig                    = 4;   // varbin
    uint OracleSigBlockHeight                      = 5;   // uint
}

// Field - Asset Settlement
message AssetSettlementField {
    uint ContractIndex                             = 0;   // uint
    string AssetType                               = 1;   // fixedchar
    AssetCodeField AssetCode                       = 2;   // AssetCode
    repeated QuantityIndexField Settlements        = 3;   // QuantityIndex[]
}

// Field - Asset Transfer
message AssetTransferField {
    uint ContractIndex                             = 0;   // uint
    string AssetType                               = 1;   // fixedchar
    AssetCodeField AssetCode                       = 2;   // AssetCode
    repeated QuantityIndexField AssetSenders       = 3;   // QuantityIndex[]
    repeated AssetReceiverField AssetReceivers     = 4;   // AssetReceiver[]
}

// Field - Document
message DocumentField {
    string Name                                    = 0;   // varchar
    string Type                                    = 1;   // varchar
    bytes Contents                                 = 2;   // varbin
}

// Field - Entity
message EntityField {
    string Name                                    = 0;   // varchar
    EntityTypeField Type                           = 1;   // EntityType
    string LEI                                     = 2;   // fixedchar
    bool AddressIncluded                           = 3;   // bool
    string UnitNumber                              = 4;   // varchar
    string BuildingNumber                          = 5;   // varchar
    string Street                                  = 6;   // varchar
    string SuburbCity                              = 7;   // varchar
    string TerritoryStateProvinceCode              = 8;   // fixedchar
    string CountryCode                             = 9;   // fixedchar
    string PostalZIPCode                           = 10;  // fixedchar
    string EmailAddress                            = 11;  // varchar
    string PhoneNumber                             = 12;  // varchar
    repeated AdministratorField Administration     = 13;  // Administrator[]
    repeated ManagerField Management               = 14;  // Manager[]
}

// Field - Manager
message ManagerField {
    RoleField Type                                 = 0;   // Role
    string Name                                    = 1;   // varchar
}

// Field - Oracle
message OracleField {
    string Name                                    = 0;   // varchar
    string URL                                     = 1;   // varchar
    bytes PublicKey                                = 2;   // varbin
}

// Field - Quantity Index
message QuantityIndexField {
    uint Index                                     = 0;   // uint
    uint Quantity                                  = 1;   // uint
}

// Field - Target Address
message TargetAddressField {
    PublicKeyHashField Address                     = 0;   // PublicKeyHash
    uint Quantity                                  = 1;   // uint
}

// Field - Voting System
message VotingSystemField {
    string Name                                    = 0;   // varchar
    string VoteType                                = 1;   // fixedchar
    string TallyLogic                              = 2;   // fixedchar
    uint ThresholdPercentage                       = 3;   // uint
    bool VoteMultiplierPermitted                   = 4;   // bool
    uint HolderProposalFee                         = 5;   // uint
}

