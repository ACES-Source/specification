#
# Establishment Action: Establishes a register. The register is intended to be used primarily for whitelisting.  However, other types of registers can be used.
#

code: R1

metadata:
  name: Establishment
  label: Establishment Action
  description: "Establishment Action -  Establishes a register. The register is intended to be used primarily for whitelisting.  However, other types of registers can be used."
  validation: AssetCreation
  rejection: Rejection

rules:
  fee:
  inputs:
    - name:
      label: "Register's Public Address"
      comments:

  outputs:
    - name:
      label: "Register's Public Address"
      comments: Send back to itself

    - name:
      label: OP_RETURN (Addition Action)
      comments: Only one Tokenized action (excluding Message actions) per txn.  Action payload is always the last index of the txn outputs.  There is no limit to the number of M1 (message) actions per txn.

    - name:
      label: "Miner's Fee"
      comments: "~550-1000 Bytes to account for return data and txn data."

fields:
  - name: Header
    label: Header
    description: "Common header data for all messages"
    type: Header
    notes: "Common header data for all messages."

  - name: TextEncoding
    label: Text Encoding
    description: " 0 = ASCII, 1 = UTF-8, 2 = UTF-16, 3 = Unicode.  Encoding applies to all 'text' data types. All 'string' types will always be encoded with ASCII.  Where string is selected, all fields will be ASCII."
    type: uint8
    size: 1
    example_hex: 00
    example_value: "0"
    notes: "Can be changed by Issuer or Operator at their discretion."

  - name: Registrar
    label: Registrar
    description: "Length 0-255 bytes. 0 is acceptable. Registrar Subfield."
    type: nvarchar8
    size: 9
    example_hex: 08436f696e62617365
    example_value: "Coinbase"
    notes: ""

  - name: RegisterType
    label: Register Type
    description: "1 - KYC"
    type: string
    size: 1
    example_hex: 00
    example_value: ""
    notes: ""

  - name: Jurisdiction
    label: Jurisdiction
    description: ""
    type: string
    size: 5
    example_hex: 4155530000
    example_value: "AUS"
    notes: ""

  - name: SupportingDocumentationHash
    label: Supporting Documentation Hash
    description: ""
    type: sha256
    size: 32
    example_hex: 98ea6e4f216f2fb4b69fff9b3a44842c38686ca685f3f55dc48c5d3fb1107be4
    example_value: "98ea6e4f216f2fb4b69fff9b3a44842c38686ca685f3f55dc48c5d3fb1107be4"
    notes: ""

  - name: Message
    label: Message
    description: "Length 0-65,535 bytes. An establishment message can be used to provide more information."
    type: nvarchar16
    size: 25
    example_hex: 00174e6f72746820416d65726963612057686974656c697374
    example_value: "North America Whitelist"
    notes: ""
