#
# Asset Definition Action: This action is used by the issuer to define the properties/characteristics of the Asset (token) that it wants to create.
#

code: A1

metadata:
  name: AssetDefinition
  label: Asset Definition Action
  description: "Asset Definition Action -  This action is used by the issuer to define the properties/characteristics of the Asset (token) that it wants to create."
  validation: AssetCreation
  rejection: Rejection

rules:
  fee:
  inputs:
    - name: Issuer
      label: "Issuer's Public Address"
      comments:

  outputs:
    - name: Contract
      label: "Contract Public Address"
      comments: Must include enough for the responding action.

fields:
  - name: Header
    label: "Header"
    description: "Common header data for all actions"
    type: Header
    notes: "Common header data for all actions. Can be changed by issuer or operator at their discretion."

  - name: AssetType
    label: Asset Type
    description: "eg. Share - Common"
    type: fixedchar
    size: 3
    example_hex: 434f55
    example_value: "COU"
    notes: "Cannot be changed by issuer, operator or smart contract."

  - name: AssetID
    label: Asset ID
    description: "Randomly generated base58 string.  Each Asset ID should be unique.  However, an Asset ID is always linked to a Contract that is identified by the public address of the Contract wallet. The Asset Type + Asset ID = Asset Code.  An Asset Code is a human readable idenitfier that can be used in a similar way to a Bitcoin (BSV) address, a vanity identifying label."
    type: fixedchar
    size: 32
    example_hex: 61706d3271737a6e686b7332337a386438337534317338303139687972693369
    example_value: "apm2qsznhks23z8d83u41s8019hyri3i"
    notes: "Cannot be changed by issuer, operator or smart contract."

  - name: AssetAuthFlags
    label: Asset Authorization Flags
    description: "Authorization Flags,  bitwise operation"
    type: bin
    size: 8
    example_hex: 00000000000011bf
    example_value: "0000000000000000000000000000000000000000000000000001000110111111"
    notes: ""

  - name: TransfersPermitted
    label: Transfers Permitted
    description: "1 = Transfers are permitted.  0 = Transfers are not permitted."
    type: bool
    size: 1
    example_hex: 01
    example_value: 1
    notes: ""

  - name: TradeRestrictions
    label: Trade Restrictions
    description: "Asset can only be traded within the trade restrictions.  Eg. AUS - Australian residents only.  EU - European Union residents only."
    type: fixedchar
    size: 3
    example_hex: 474252
    example_value: "GBR"
    notes: ""

  - name: EnforcementOrdersPermitted
    label: Enforcement Orders Permitted
    description: "1 = Enforcement Orders are permitted. 0 = Enforcement Orders are not permitted."
    type: bool
    size: 1
    example_hex: 01
    example_value: 1
    notes: ""

  - name: VoteMultiplier
    label: Vote Multiplier
    description: "Multiplies the vote by the integer. 1 token = 1 vote with a 1 for vote multipler (normal).  1 token = 3 votes with a multiplier of 3, for example."
    type: uint8
    size: 1
    example_hex: 03
    example_value: "3"
    notes: ""

  - name: ReferendumProposal
    label: Referendum Proposal
    description: "A Referendum is permitted for Asset-Wide Proposals (outside of smart contract scope) if also permitted by the contract. If the contract has proposals by referendum restricted, then this flag is meaningless."
    type: bool
    size: 1
    example_hex: 01
    example_value: 1
    notes: ""

  - name: InitiativeProposal
    label: Initiative Proposal
    description: "An initiative is permitted for Asset-Wide Proposals (outside of smart contract scope) if also permitted by the contract. If the contract has proposals by initiative restricted, then this flag is meaningless."
    type: bool
    size: 1
    example_hex: 01
    example_value: 1
    notes: ""

  - name: AssetModificationGovernance
    label: Asset Modification Governance
    description: "1 - Contract-wide Asset Governance.  0 - Asset-wide Asset Governance.  If a referendum or initiative is used to propose a modification to a subfield controlled by the asset auth flags, then the vote will either be a contract-wide vote (all assets vote on the referendum/initiative) or an asset-wide vote (all assets vote on the referendum/initiative) depending on the value in this subfield.  The voting system specifies the voting rules."
    type: bool
    size: 1
    example_hex: 01
    example_value: "1"
    notes: ""

  - name: TokenQty
    label: Qty of Tokens
    description: "Quantity of token - 0 is valid. Fungible 'shares' of the Asset. 1 is used for non-fungible tokens.  Asset IDs become the non-fungible Asset ID and many Asset IDs can be associated with a particular Contract."
    type: uint64
    size: 8
    example_hex: 00000000000f4240
    example_value: "1000000"
    notes: ""

  - name: ContractFeeCurrency
    label: Contract Fee Currency
    description: "BSV, USD, AUD, EUR, etc."
    type: fixedchar
    size: 3
    example_hex: 415544
    example_value: "AUD"
    notes: ""

  - name: ContractFeeVar
    label: Contract Fee Var
    description: "Percent of the value of the transaction"
    type: float32
    size: 4
    example_hex: 3ba3d70a
    example_value: "0.005"
    notes: ""

  - name: ContractFeeFixed
    label: Contract Fee Fixed
    description: "Fixed fee (payment made in BSV)"
    type: float32
    size: 4
    example_hex: 3c23d70a
    example_value: "0.01"
    notes: ""

  - name: AssetPayloadLen
    label: Asset Payload Length
    description: "Size of the asset payload in bytes."
    type: uint16
    size: 2
    example_hex: 0009
    example_value: 9

  - name: AssetPayload
    label: Asset Payload
    description: "Payload length is dependent on the asset type. Each asset is made up of a defined set of information pertaining to the specific asset type, and may contain fields of variable length type (nvarchar8, 16, 32)"
    type: byte[]
    example_hex: 736f6d652064617461
    example_value: "some data"
    notes: ""

# Constructor parameters
constructor:
    - name: assetType
      type: string
      field: AssetType
