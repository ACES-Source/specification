#
# Contract Amendment Action: the issuer can initiate an amendment to the contract establishment metadata. The ability to make an amendment to the contract is restricted by the Authorization Flag set on the current revision of Contract Formation action.
#

code: C3

metadata:
  name: ContractAmendment
  label: Contract Amendment
  description: "The issuer can initiate an amendment to the contract establishment metadata. The ability to make an amendment to the contract is restricted by the Authorization Flag set on the current revision of Contract Formation action."
  validation: AssetCreation
  rejection: Rejection

rules:
  fee:
  inputs:
    - name: Issuer
      label: "Issuer's Public Address"
      comments: "This action can only come from the issuer."

    - name: NewIssuer
      label: New Issuer Public Address
      comments: "Only treated as the new issuer address when the Change Issuer Address flag is set to true."

  outputs:
    - name: Contract
      label: Contract Public Address
      comments: "The related contract address."

fields:
  - name: ChangeIssuerAddress
    label: Change Issuer Address
    description: "Used to change the issuer address.  The new issuer address must be in the input[1] position."
    type: bool
    example_hex: 01
    example: 1
    notes: ""

  - name: ChangeOperatorAddress
    label: Change Operator Address
    description: "Used to change the smart contract operator address.  The new operator address must be in the input[1] position, unless issuer is being changed too, then it is in input[2]."
    type: bool
    example_hex: 01
    example: 1
    notes: ""

  - name: ContractRevision
    label: Contract Revision
    description: "Counter 0 to (2^32)-1"
    type: uint
    size: 4
    example_hex: 002a
    example: 42
    notes: ""

  - name: Amendments
    label: Amendments
    type: Amendment[]
    description: A collection of modifications to perform on this contract.

  - name: RefTxID
    label: Ref Tx ID
    description: "The Bitcoin transaction ID of the associated result action that permitted the modifications. See Governance for more details."
    type: TxId
    notes: ""
