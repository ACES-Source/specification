#
# Message Action: the message action is a general purpose communication action.
# 'Twitter/SMS' for Issuers/Investors/Users. The message txn can also be used for
# passing partially signed txns on-chain, establishing private communication channels
# and EDI (receipting, invoices, PO, and private offers/bids). The messages are broken
# down by type for easy filtering in the a user's wallet. The Message Types are listed
# in the Message Types table.
#

code: M1

metadata:
  name: Message
  label: Message Action
  description: >
    Message Action - the message action is a general purpose communication action.
    'Twitter/SMS' for Issuers/Investors/Users. The message txn can also be used for
    passing partially signed txns on-chain, establishing private communication channels
    and EDI (receipting, invoices, PO, and private offers/bids). The messages are broken
    down by type for easy filtering in the a user's wallet. The Message Types are listed
    in the Message Types table.

rules:
  fee:
  inputs:
    - name: MsgSender
      label: "Msg Sender's Public Address"
      comments:

  outputs:
    - name: MsgReceiverX
      label: "Msg Receiver's Public Address"
      comments: Dust limit rule minimum value output of 546

fields:
  - name: Header
    label: Header
    description: "Common header data for all actions"
    type: Header
    notes: "Common header data for all actions."

  - name: QtyReceivingAddresses
    label: Qty Receiving Addresses
    description: "0-255 Message Receiving Addresses"
    type: uint8
    size: 1
    example_hex: 02
    example_value: 2
    notes: ""

  - name: AddressIndexes
    label: Address Indexes
    description: "Associates the message to a particular output by the index."
    type: uint16[]
    example_hex: "00010002"

  - name: MessageType
    label: Message Type
    description: "Potential for up to 65,535 different message types"
    type: string
    size: 2
    example_hex: "3600"
    example_value: "6"
    notes: ""

  - name: MessagePayload
    label: Message Payload
    description: >
      Length only limited by the Bitcoin protocol. Public or private (RSA public key, Diffie-Hellman).
      Issuers/Contracts can send the signifying amount of satoshis to themselves for public
      announcements or private 'notes' if encrypted. See Message Types for a full list of
      potential use cases.
    type: nvarchar32
    example_hex: "000000000000000c48656c6c6f20776f726c6421"
    example_value: "Hello world!"
    notes: ""
