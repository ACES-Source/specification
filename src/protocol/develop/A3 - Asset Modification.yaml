# 
# Asset Modification Action: Token Dilutions, Call Backs/Revocations, burning etc. Any field can be amended except for the Asset Revision field (incremental counter based on the previous Asset Creation Txn) and the Action Prefix. Asset Types specific payloads are locked to the Asset Type.  Asset Type specific payload amendments must be done as a protocol Version upgrade.  Authorization flags can restrict some fields or all fields from being amended. Some amendments require a Token Owner vote for the smart contract to permit.
# 

code: A3

metadata:
  name: AssetModification
  label: Asset Modification Action
  description: "Asset Modification Action -  Token Dilutions, Call Backs/Revocations, burning etc. Any field can be amended except for the Asset Revision field (incremental counter based on the previous Asset Creation Txn) and the Action Prefix. Asset Types specific payloads are locked to the Asset Type.  Asset Type specific payload amendments must be done as a protocol Version upgrade.  Authorization flags can restrict some fields or all fields from being amended. Some amendments require a Token Owner vote for the smart contract to permit."
  validation: AssetCreation
  rejection: Rejection

rules:
  fee:
  inputs:
    - name: 
      label: Issuer's Public Address
      comments: 

  outputs:
    - name: 
      label: Contract Public Address
      comments: Enough for the responding action.

    - name: 
      label: Issuer's Public Address
      comments: Change

    - name: 
      label: OP_RETURN (Asset Modification Action)
      comments: Only one Tokenized action (excluding Message actions) per txn.  Action payload is always the last index of the txn outputs.  There is no limit to the number of M1 (message) actions per txn. 

    - name: 
      label: Miner's Fee
      comments: ~550-1000 Bytes to account for return data and txn data.

fields:
  - name: PUSHDATAINSTRUCTION
    label: Push Data
    description: "PUSHDATA 13 bytes for Protocol Identifer"
    type: opcode
    size: 1
    example hex: 0d
    example value: "13"
    notes: "Cannot be changed by issuer, operator, or smart contract."

  - name: ProtocolID
    label: Protocol Identifier
    description: "Tokenized ID Prefix.  tokenized.com"
    type: string
    size: 13
    example hex: 746f6b656e697a65642e636f6d
    example value: "tokenized.com"
    notes: ""

  - name: OP_PUSHDATA
    label: Push Data
    description: "PACKET LENGTH, PUSHDATA1 (76), PUSHDATA2 (77), or PUSHDATA4 (78) depending on total size of action payload."
    type: opcode
    size: 1
    example hex: 4c
    example value: "76"
    notes: "Cannot be changed by issuer, operator or smart contract."

  - name: LenActionPayload
    label: Length of Action Payload
    description: "Length of the action message (0 - 65,535 bytes). 0 if pushdata length <76B, 1 byte if PUSHDATA1 is used, 2 bytes if PUSHDATA2 and 4 bytes if PUSHDATA4."
    type: pushdata_length
    size: 1
    example hex: 66
    example value: "102"
    notes: "Depends on Action Payload"

  - name: Version
    label: Version
    description: "255 reserved for additional versions. Tokenized protocol versioning."
    type: uint8
    size: 1
    example hex: 0
    example value: "0"
    notes: "Can be changed by Issuer or Operator at their discretion.  Smart Contract will reject if it hasn't been updated to interpret the version."

  - name: ActionPrefix
    label: Action Prefix
    description: "Asset Modification: The issuer can request modifications to already created assets.  The smart contract will respond with a Creation Action if the Modification Action is in agreement with the Contract terms and conditions and will increment the revision of the Creation Action by 1. Otherwise the Smart Contract will respond with a Rejection Action."
    type: string
    size: 2
    example hex: 4133
    example value: "A3"
    notes: "Cannot be changed by issuer, operator or smart contract."

  - name: TextEncoding
    label: Text Encoding
    description: " 0 = ASCII, 1 = UTF-8, 2 = UTF-16, 3 = Unicode.  Encoding applies to all 'text' data types. All 'string' types will always be encoded with ASCII.  Where string is selected, all fields will be ASCII."
    type: uint8
    size: 1
    example hex: 0
    example value: "0"
    notes: "Can be changed by Issuer or Operator at their discretion."

  - name: AssetRevision
    label: Asset Revision
    description: "Counter. (Subfield cannot be manually changed by Asset Modification Action.  Only SC can increment by 1 with each AC action. SC will reject AM actions where the wrong asset revision has been selected. "
    type: uint64
    size: 8
    example hex: 0000000000000000
    example value: "0"
    notes: "Cannot be Amended"

  - name: ModificationCount
    label: ModificationCount
    description: "Number of Modifications. Must be less than the max Subfield Index of CF."
    type: uint8
    size: 1
    example hex: 01
    example value: "1"
    notes: ""

  - name: SubfieldIndexX
    label: SubfieldIndex
    description: "Subfield to be modified."
    type: uint8
    size: 1
    example hex: 10
    example value: "16"
    notes: ""

  - name: ModificationX
    label: Modification
    description: "New data for the modified subfield. Data type determined by the subfield index."
    type: nvarchar32
    size: 56
    example hex: 0000003468747470733a2f2f746f6b656e697a65642e636f6d2f436f6e74726163742f3371656f534367374a6d66536e4a65734a466f6a6a
    example value: "https://tokenized.com/Contract/3qeoSCg7JmfSnJesJFojj"
    notes: ""

