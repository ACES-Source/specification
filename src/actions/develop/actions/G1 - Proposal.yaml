#
# Proposal Action: Allows the Administration/Token Holders to propose a change (aka Initiative/Shareholder vote).  A significant cost - specified in the Contract Formation - can be attached to this action when sent from Token Holders to reduce spam, as the resulting vote will be put to all token owners.
#

code: G1
name: Proposal
label: Proposal
description: "Allows the Administration/Token Holders to propose a change (aka Initiative/Shareholder vote).  A significant cost - specified in the Contract Formation - can be attached to this action when sent from Token Holders to reduce spam, as the resulting vote will be put to all token owners."

metadata:
  validation: Contract/Asset Amendment or nothing
  rejection: Rejection

  inputs:
    - name: User
      label: "Operator / Token Owner's Public Address"
      comments: "The user making the proposal for this contract."

  outputs:
    - name: Contract
      label: Contract Public Address
      comments: Includes contract fee and holder proposal fee if applicable.

    - name: Contract
      label: Contract Public Address
      comments: Fund the Result TX at Vote cut off

fields:
  - name: Type
    label: Type
    description: |
      Type of proposal. Supported values:
        0 Referendum / Administration Initiates / Members Vote
        1 Initiative / Members Initiate / Members Vote
        2 AdministrativeMatter / Administration Initiates / Administrators Vote
    type: uint
    size: 1
    options:
      - 0
      - 1
      - 2

  - name: AssetType
    label: Asset Type
    description: "Three letter character that specifies the asset type."
    type: fixedchar
    size: 3
    example: "SHC"

  - name: AssetCode
    label: Asset Code
    description: A unique code that is used to identify the asset. It is generated by hashing the contract public key hash and the asset index. SHA256(contract PKH + asset index)
    type: AssetCode
    notes: "Cannot be changed by the administration, operator or smart contract."

  - name: VoteSystem
    label: Vote System
    description: "X for Vote System X. (1-255, 0 is not valid.)"
    type: uint
    size: 1
    example: "1"

  - name: ProposedAmendments
    label: Proposed Amendments
    description: "Each element contains details of which fields to modify, or delete. Because the number of fields in a Contract and Asset is dynamic due to some fields being able to be repeated, the index value of the field needs to be calculated against the Contract or Asset the changes are to apply to. In the event of a Vote being created from this Initiative, the changes will be applied to the version of the Contract or Asset at that time."
    type: Amendment[]

  - name: VoteOptions
    label: Vote Options
    description: "Length 1-255 bytes. 0 is not valid. Each byte allows for a different vote option. Typical votes will likely be multiple choice or Y/N. Vote instances are identified by the Tx-ID. AB would be used for Y/N (binary) type votes. When Specific is true, only AB is a valid value."
    type: varchar
    example: "ABCDEFGHIJKLMNO"

  - name: VoteMax
    label: Vote Max
    description: "Range: 1-X. How many selections can a voter make in a Ballot Cast. 1 is selected for Y/N (binary). When Specific is true, only 1 is a valid value."
    type: uint
    size: 1
    example: "15"

  - name: ProposalDescription
    label: Proposal Description
    description: "Length restricted by the Bitcoin protocol. 0 is valid. Description or details of the vote"
    type: varchar
    varSize: medium
    example: "Change the name of the Contract."

  - name: ProposalDocumentHash
    label: Proposal Document Hash
    description: "SHA256 Hash of the proposal document to be distributed to voters."
    type: bin
    size: 32
    example: "77201b0094f50df309f0343e4f44dae64d0de503c91038faf2c6b039f9f18aec"

  - name: VoteCutOffTimestamp
    label: Vote Cut-Off Timestamp
    description: "Ballot casts after this timestamp will not be included. The vote has finished."
    type: Timestamp
